# Story 1.1: Project Setup & Tooling Integration

## Status
Approved

## Story
**As a** Developer,
**I want** a new Next.js 15 project initialized with all core dependencies and tooling,
**so that** I can begin development efficiently.

## Acceptance Criteria
1. A new Next.js 15 project is created using the App Router.
2. TypeScript is configured.
3. TailwindCSS and DaisyUI are installed and configured.
4. Prisma, tRPC, React Query, and Apache ECharts are installed.
5. ESLint and Prettier are configured for code quality.

## Tasks / Subtasks
- [ ] Initialize monorepo structure (AC: 1)
  - [ ] Create root package.json with pnpm workspace configuration
  - [ ] Set up pnpm-workspace.yaml
  - [ ] Create base tsconfig.json
- [ ] Create Next.js 15 application (AC: 1, 2)
  - [ ] Initialize Next.js app in apps/web/ using App Router
  - [ ] Configure TypeScript with strict settings
  - [ ] Set up next.config.mjs
- [ ] Configure styling framework (AC: 3)
  - [ ] Install and configure TailwindCSS 4.x
  - [ ] Install and configure DaisyUI 5.1.x
  - [ ] Set up global styles in app/globals.css
- [ ] Install core dependencies (AC: 4)
  - [ ] Set up Prisma package in packages/db/
  - [ ] Install and configure tRPC 11.x in server/
  - [ ] Install React Query 5.x for client state
  - [ ] Install Apache ECharts 6.x for charting
- [ ] Configure code quality tools (AC: 5)
  - [ ] Set up ESLint with TypeScript rules in packages/config/
  - [ ] Configure Prettier with project standards
  - [ ] Add lint and format scripts to package.json
- [ ] Set up testing framework
  - [ ] Install Vitest and React Testing Library
  - [ ] Configure test scripts and paths
- [ ] Create initial folder structure
  - [ ] Set up src/app/, src/components/, src/lib/, src/server/ directories
  - [ ] Create server/api/, server/db.ts, server/trpc.ts files

## Dev Notes

### Tech Stack Requirements
[Source: architecture/3-tech-stack.md]

The following specific versions and technologies must be used:

| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js (App Router) | 15.x | Industry standard for SSR React apps with serverless backend |
| TypeScript | 5.x | Enforces type safety across the entire project |
| tRPC | 11.x | Provides end-to-end type safety between server and client |
| PostgreSQL (Supabase) | 15.x | Robust, open-source relational database |
| Prisma | 6.15.x | Modern, type-safe ORM for database interaction |
| TailwindCSS + DaisyUI | 4.x / 5.1.x | Utility-first CSS with professional component library |
| React Query | 5.x | Manages server state, caching, and data fetching |
| Apache ECharts | 6.x | Powerful charting library for data visualization |
| Vitest, React Testing Library | latest | Modern, fast testing framework |

### Project Structure Requirements
[Source: architecture/4-monorepo-project-structure.md]

The project must follow this exact monorepo structure:

```
/peak-finance-app
├── apps/
│   └── web/                      # The Next.js application
│       ├── src/
│       │   ├── app/                # Next.js App Router pages and layouts
│       │   ├── components/         # React components (UI, layout)
│       │   ├── lib/                # Client-side helpers (Supabase client)
│       │   └── server/             # Server-side code
│       │       ├── api/            # tRPC API routers
│       │       ├── db.ts           # Prisma client instantiation
│       │       └── trpc.ts         # tRPC server setup
│       └── next.config.mjs
├── packages/
│   ├── db/                       # Prisma schema and generated client
│   │   ├── prisma/
│   │   │   └── schema.prisma
│   │   └── package.json
│   └── config/                   # Shared configurations
│       ├── eslint-preset.js
│       └── tsconfig/
│           └── base.json
├── package.json
├── pnpm-workspace.yaml
└── tsconfig.json
```

### Coding Standards Requirements
[Source: architecture/10-coding-standards-for-ai-agents.md]

CRITICAL: All development must adhere to these standards:
- **Type Safety is Paramount**: All functions and variables must have explicit types. The `any` type is forbidden.
- **Environment Variables**: Access environment variables only through a centralized configuration module. Never use `process.env` directly in components or API logic.
- **API Interaction**: All data fetching must be done through tRPC hooks (`api.stock.search.useQuery`). Direct `fetch` calls are not allowed.
- **Database Interaction**: All database operations must go through the Prisma client. No raw SQL queries are permitted.
- **Error Handling**: All tRPC procedures must include structured error handling and return specific tRPC error codes.

### Testing
[Source: architecture/9-testing-strategy.md]

Testing requirements for this story:
- **Unit Tests**: Use Vitest and React Testing Library for testing individual components and utilities
- **Integration Tests**: tRPC procedures will be tested with mocking for database and external APIs
- **Test File Location**: Tests should be colocated with source files or in dedicated `__tests__` directories
- **Configuration**: All test configuration must support TypeScript
- **Standards**: Follow established testing patterns once core setup is complete

### Project Structure Notes
- The current working directory `~/Projects/stock-search-app` will become the monorepo root
- Package manager: Must use pnpm for workspace management
- All packages must be properly configured for TypeScript compilation
- Shared configurations should be placed in `packages/config/` for reuse

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-02 | 1.0 | Initial story creation | David Hargitai, dev |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent QA review of the completed story implementation*